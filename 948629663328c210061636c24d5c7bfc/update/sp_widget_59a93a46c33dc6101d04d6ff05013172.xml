<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller = function ($rootScope, $scope, $uibModal) {


  /* widget controller */
  var c = this;

  // $rootScope.server = c.server;
  // $rootScope.data = c.data;



  // console.log(top.NOW.guided_tours.events.on());


  // c.createPerfomanceEvaluation = function () {
  //   $scope.modalInstance = $uibModal.open({
  //     templateUrl: 'modalTemplate',
  //     scope: $scope
  //   });
  // }

  // $scope.closeModal = function () {
  //   $scope.modalInstance.close();
  // }

  // $scope.crete = function () {
  //   $scope.modalInstance.close();
  //   c.createEvaluation();
  // }

  // c.createEvaluation = async function () {
  //   var res = await c.server.get({
  //     action: 'create_evaluation',
  //     data: c.data.create_new_evaluation
  //   });


  //   window.location = '/esc?sys_id=' + res.data.create_new_evaluation.evaluation.sys_id + '&view=sp&id=ticket&table=u_aliat_evaluacion_de_desempeno';
  //   // c.data.evaluations.number_evaluations = 1;
  //   // c.data.evaluation = res.data.create_new_evaluation;
  //   // c.data.evaluation.objective_select = res.data.create_new_evaluation.evaluation.objectives[0];
  //   // c.data.evaluation.initiaitive_select = res.data.create_new_evaluation.evaluation.objectives[0].iniciatives[0];
  // }

};]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>ips_my_self_assessments</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>My self assessments</name>
        <option_schema/>
        <public>true</public>
        <roles/>
        <script><![CDATA[(function () {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */

  data.options = JSON.parse(options.widget_parameters | '');


  var paginator = {
    current_page: 0,
    next_page: 1,
    previus_page: 0,
    records_per_page: 3
  };


  var ipsPerformanceEvaluation = new IPSPerformanceEvaluation(paginator);
  data.evaluations = ipsPerformanceEvaluation.getEvaluations(paginator);



})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>jorge.ortega</sys_created_by>
        <sys_created_on>2024-04-27 22:56:30</sys_created_on>
        <sys_id>59a93a46c33dc6101d04d6ff05013172</sys_id>
        <sys_mod_count>50</sys_mod_count>
        <sys_name>My self assessments</sys_name>
        <sys_package display_value="IPS Performance Assessments" source="x_ipsu2_ips_perfor">948629663328c210061636c24d5c7bfc</sys_package>
        <sys_policy/>
        <sys_scope display_value="IPS Performance Assessments">948629663328c210061636c24d5c7bfc</sys_scope>
        <sys_update_name>sp_widget_59a93a46c33dc6101d04d6ff05013172</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-04-28 21:33:48</sys_updated_on>
        <template><![CDATA[<style>
  .card {
    padding: 2.4rem !important;
    background-color: #ffffff;
    border: 0.1rem solid #FFFFFF;
    border-radius: 0.8rem;
    box-shadow: 0 0.4rem 0.8rem 0 rgb(23 40 52 / 8%);
  }

  .pa-2 {
    padding: 2rem !important;
  }
</style>


<section>
  <header class="row">
    <div class="col col-md-12 pa-1 text-center">
      <h2>${Performance Evaluation}</h2>
    </div>
  </header>

  <article>
    <pre>{{ data | json }}</pre>
    <div class="ips-card-body row">
      <main class="col col-md-12">
        <div class="card">
          <div class="row">
            <div class="col col-md-12">

              <div class="text-center my-2">
                <h2 class="font-weight-bold"> ${My Evaluations}</h2>
                <p class="text-center">${Da clic sobre la evaluación de tu interés, para verla completa.}</p>
              </div>
              <div class="">
                <div class="d-flex jutify-center my-2" ng-repeat="evaluation in data.evaluations.record">
                  <div class="text-center">
                    <hr>

                    <p style="padding: 5px 10px; margin-bottom: 5px">
                      <b>Estado:</b>
                      {{ evaluation.state }}
                      <br>
                    <div ng-if="evaluation.user == evaluation.colaborador">
                      <span
                        ng-if="(evaluation.state_1 == '4' && evaluation.u_ye_colaborator_comments) || (evaluation.state_1 == '3' &&  evaluation.u_my_colaborator_comments)"
                        style="color: #0070b9 ">
                        ${Esperando evaluación de } {{ evaluation.u_jefe_del_empleado }}
                      </span>
                    </div>


                    </p>

                    <b> Descripción:</b> {{ evaluation.short_description }}
                    <br>
                    <button class="btn btn-default  text-infos" ng-click="showForm2(evaluation)">
                      Ver evaluación
                    </button>

                    <a ng-if="(evaluation.state == 'Complete' || evaluation.state == 'Completada' )"
                      class="btn btn-default  text-infos" target="_blank"
                      href="/ui_page.do?sys_id=10761cac97db9910a0687cd11153af5b&sysparm_sys_id={{ evaluation.sys_id }}">
                      Descargar PDF
                    </a>
                    <hr>
                  </div>
                </div>
                <div class="d-flex jutify-center my-2">
                  <div>

                    <button class="btn btn-primary" ng-click="createNewEvaluationOpenModal()">
                      ${Crear objetivos}
                    </button>
                  </div>
                </div>


                <div class="d-flex jutify-center my-2">

                  <div class="row d-flex justify-cenetr">

                    <div class="col col-sm-6 col-md-6">
                      <button class="btn btn-outline-primary" ng-click="getOldEvaluation()"
                        ng-class="{'disabled': (data.evaluations.paginator.current_page + 5) >= data.evaluations.paginator.total}">
                        ${Old Evaluatios}
                      </button>
                    </div>

                    <div class="col col-sm-6 col-md-6">
                      <button class="btn btn-outline-primary" ng-click="getRecentEvaluation()"
                        ng-class="{'disabled': data.evaluations.paginator.current_page == -1}">
                        ${Recent Evaluations}
                      </button>
                    </div>

                  </div>
                </div>

              </div>
            </div>

          </div>
        </div>


      </main>
    </div>
  </article>
</section>]]></template>
    </sp_widget>
</record_update>
